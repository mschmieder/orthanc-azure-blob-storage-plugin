sudo: required
language: cpp

matrix:
  fast_finish: true
  include:
    - os: linux      
      services:
        - docker
      before_install:
        - curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
        - sudo add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable"
        - sudo apt-get update
        - sudo apt-get -y install docker-ce
      script:
      - docker-compose run build-plugin
    - os: osx
      osx_image: xcode9.4   
      before_install:
        - brew update
        - brew install openssl cpprestsdk jsoncpp gettext cryptopp boost libxml2 ossp-uuid wget
      script:
      - bash bootstrap.sh
      - bash build.sh